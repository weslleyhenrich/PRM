<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador de Plano de Saúde</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .table-fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .selection-button.selected {
            background-color: #2563eb; /* bg-blue-700 */
            color: white;
            border-color: #2563eb;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4 py-10">

    <div class="max-w-6xl w-full bg-white rounded-xl shadow-2xl overflow-hidden mx-auto ">
        
        <div class="grid grid-cols-2 gap-4 p-4 bg-white rounded-t-xl items-center">
            <div class="flex justify-center">
                <img src="https://i.ibb.co/wfDSZ16/Captura-de-tela-2025-08-15-162619.png" alt="Logo da Sua Empresa" class="h-12 w-auto">
            </div>
            <div class="flex justify-center">
                <img src="https://i.ibb.co/3yTgGQ01/LOGO-SEM-FUNDO-1.png" alt="Logo Agnus" class="h-20 w-auto">
            </div>
        </div>

        <div class="p-8 md:p-10">
            <header class="text-center mb-6">
                <h1 class="text-3xl md:text-4xl font-bold text-blue-800">
                    Simulador de Plano de Saúde
                </h1>
                <p class="text-lg text-gray-700 mt-3">
                    Escolha o plano ideal para você e sua família.
                </p>
            </header>
            
            <div class="text-center mb-8">
                <p class="text-gray-700 text-base md:text-lg leading-relaxed max-w-3xl mx-auto">
                    Para ajudar na sua decisão, utilize a ferramenta abaixo para conhecer os planos e simular os valores mensais.
                </p>
                <p class="text-gray-700 text-base md:text-lg leading-relaxed max-w-3xl mx-auto">
                    Lembrando que temos duas tabelas, uma até 29 pessoas e outra com 30 ou mais, isso pelo fato que estamos angariando todos e confirmando quem
                    irá seguir para a Amil.
                </p>
                <p class="text-gray-700 text-base md:text-lg leading-relaxed max-w-3xl mx-auto">
                    Acreditamos que as 30 vidas serão atingidas, porém para ciência, segue ambas as tabelas.
                </p>
            </div>
            
            <div id="tier-selection" class="bg-gray-50 p-6 rounded-lg border border-gray-200">
                <h2 class="text-2xl font-bold text-gray-800 text-center mb-1">Passo 0: Qual o porte da empresa?</h2>
                <p class="text-center text-gray-600 mb-6">Selecione o número de vidas do contrato.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <button data-tier="29" class="selection-button tier-button w-full border-2 border-gray-300 text-gray-700 font-bold py-3 px-4 rounded-lg hover:bg-blue-600 hover:text-white transition-colors">
                        Até 29 vidas
                    </button>
                    <button data-tier="30" class="selection-button tier-button w-full border-2 border-gray-300 text-gray-700 font-bold py-3 px-4 rounded-lg hover:bg-blue-600 hover:text-white transition-colors">
                        30 vidas ou mais
                    </button>
                </div>
            </div>

            <div id="line-selection" class="hidden mt-8 bg-gray-50 p-6 rounded-lg border border-gray-200">
                <h2 class="text-2xl font-bold text-gray-800 text-center mb-1">Passo 1: Qual a linha de plano?</h2>
                <p class="text-center text-gray-600 mb-6">Escolha entre as linhas de produtos disponíveis.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <button data-line="s" class="selection-button line-button w-full border-2 border-gray-300 text-gray-700 font-bold py-3 px-4 rounded-lg hover:bg-blue-600 hover:text-white transition-colors">
                        Linha S
                    </button>
                    <button data-line="nova" class="selection-button line-button w-full border-2 border-gray-300 text-gray-700 font-bold py-3 px-4 rounded-lg hover:bg-blue-600 hover:text-white transition-colors">
                        Nova Linha Amil
                    </button>
                </div>
            </div>

            <div id="copay-selection" class="hidden mt-8 bg-gray-50 p-6 rounded-lg border border-gray-200">
                <h2 class="text-2xl font-bold text-gray-800 text-center mb-1">Passo 2: Qual o tipo de coparticipação?</h2>
                <p class="text-center text-gray-600 mb-6">Selecione o modelo de contratação.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <button data-copay="completa" class="selection-button copay-button w-full border-2 border-gray-300 text-gray-700 font-bold py-3 px-4 rounded-lg hover:bg-blue-600 hover:text-white transition-colors">
                        Coparticipação Completa (30%)
                    </button>
                    <button data-copay="parcial" class="selection-button copay-button w-full border-2 border-gray-300 text-gray-700 font-bold py-3 px-4 rounded-lg hover:bg-blue-600 hover:text-white transition-colors">
                        Coparticipação Parcial
                    </button>
                </div>
            </div>

            <div id="main-simulator" class="hidden mt-8">
                <div id="cost-simulator" class="bg-gray-50 p-6 rounded-lg border border-gray-200">
                    <h2 class="text-2xl font-bold text-gray-800 text-center mb-1">Passo 3: Simule os Custos</h2>
                    <p class="text-center text-gray-600 mb-6">Insira as idades para ver os valores de cada plano.</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label for="holder-age" class="block text-sm font-medium text-gray-700">Sua idade (Titular)</label>
                            <input type="number" id="holder-age" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm" placeholder="Ex: 35">
                        </div>
                        <div id="dependents-section">
                            <label class="block text-sm font-medium text-gray-700">Idade dos dependentes (se houver)</label>
                            <div id="dependents-list" class="space-y-2 mt-1"></div>
                            <button id="add-dependent-btn" class="mt-2 text-sm text-blue-600 hover:text-blue-800 font-semibold">+ Adicionar dependente</button>
                        </div>
                    </div>
                    <button id="calculate-btn" class="w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center">
                        Simular Custos
                    </button>
                    <div id="simulation-results" class="mt-6 hidden"></div>
                </div>

                <div id="network-viewer" class="bg-indigo-50 p-6 rounded-lg border border-indigo-200 mt-8">
                    <h2 class="text-2xl font-bold text-gray-800 text-center mb-1">Passo 4: Consulte a Rede Oficial</h2>
                    <p class="text-center text-gray-600 mb-6">
                        Para garantir que seus médicos e hospitais preferidos estão cobertos, siga o passo a passo abaixo e consulte a rede completa no site oficial da Amil.
                    </p>
                    <div class="my-6 flex justify-center">
                        <img src="https://i.ibb.co/yGzTxX8/Untitled-Made-with-Flex-Clip.gif" alt="Passo a passo para consultar a rede credenciada Amil" border="0" class="rounded-lg shadow-md max-w-full h-auto">
                    </div>
                    <div class="mt-4">
                        <button id="view-network-btn" class="w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors">
                            Acessar Rede Credenciada Amil
                        </button>
                    </div>
                </div>

                <div id="copay-info-section" class="bg-gray-50 p-6 rounded-lg border border-gray-200 mt-8">
                    <h2 class="text-2xl font-bold text-gray-800 text-center mb-2">Regras de Coparticipação</h2>
                    <p class="text-center text-gray-700 leading-relaxed max-w-4xl mx-auto mb-8">
                        A coparticipação é uma modalidade em que o usuário paga, além do valor mensal do plano, uma taxa a cada vez que utilizar um serviço. O valor é um percentual do custo, mas com um <strong>limite (teto) de cobrança</strong> para garantir previsibilidade.
                    </p>
                    
                    <div id="copay-table-completa" class="hidden">
                        <h3 class="text-lg font-bold text-gray-800 text-center mb-4">Valores para Coparticipação Completa</h3>
                        <div class="overflow-x-auto">
                            <table class="w-full text-sm text-left text-gray-700 bg-white rounded-lg shadow-md">
                                <thead class="bg-gray-200 text-xs uppercase">
                                    <tr>
                                        <th class="p-3 text-left font-medium">Procedimento</th>
                                        <th class="p-3 text-center font-medium">Percentual</th>
                                        <th class="p-3 text-center font-medium">Bronze / Bronze+</th>
                                        <th class="p-3 text-center font-medium">Prata / Ouro</th>
                                        <th class="p-3 text-center font-medium">S380</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="border-b bg-gray-50"><td class="p-2 font-semibold text-gray-600" colspan="5">Consultas</td></tr>
                                    <tr class="border-b">
                                        <td class="p-3 text-left">Consulta Eletiva</td>
                                        <td class="p-3 text-center">30%</td>
                                        <td class="p-3 text-center">R$ 30,00</td>
                                        <td class="p-3 text-center">R$ 30,00</td>
                                        <td class="p-3 text-center">R$ 30,00</td>
                                    </tr>
                                    <tr class="border-b">
                                        <td class="p-3 text-left">Consulta em Pronto-Socorro</td>
                                        <td class="p-3 text-center">40%</td>
                                        <td class="p-3 text-center">R$ 80,00</td>
                                        <td class="p-3 text-center">R$ 90,00</td>
                                        <td class="p-3 text-center">R$ 80,00</td>
                                    </tr>
                                    <tr class="border-b bg-gray-50"><td class="p-2 font-semibold text-gray-600" colspan="5">Exames</td></tr>
                                    <tr class="border-b">
                                        <td class="p-3 text-left">Exames Básicos</td>
                                        <td class="p-3 text-center">30%</td>
                                        <td class="p-3 text-center">R$ 20,00</td>
                                        <td class="p-3 text-center">R$ 25,00</td>
                                        <td class="p-3 text-center">R$ 20,00</td>
                                    </tr>
                                    <tr class="border-b">
                                        <td class="p-3 text-left">Exames Especiais</td>
                                        <td class="p-3 text-center">30%</td>
                                        <td class="p-3 text-center">R$ 100,00</td>
                                        <td class="p-3 text-center">R$ 110,00</td>
                                        <td class="p-3 text-center">R$ 100,00</td>
                                    </tr>
                                    <tr class="border-b bg-gray-50"><td class="p-2 font-semibold text-gray-600" colspan="5">Procedimentos e Terapias</td></tr>
                                    <tr class="border-b">
                                        <td class="p-3 text-left">Procedimentos Básicos</td>
                                        <td class="p-3 text-center">30%</td>
                                        <td class="p-3 text-center">R$ 35,00</td>
                                        <td class="p-3 text-center">R$ 60,00</td>
                                        <td class="p-3 text-center">R$ 35,00</td>
                                    </tr>
                                    <tr class="border-b">
                                        <td class="p-3 text-left">Procedimentos Especiais</td>
                                        <td class="p-3 text-center">30%</td>
                                        <td class="p-3 text-center">R$ 140,00</td>
                                        <td class="p-3 text-center">R$ 150,00</td>
                                        <td class="p-3 text-center">R$ 140,00</td>
                                    </tr>
                                     <tr class="border-b">
                                        <td class="p-3 text-left">Fisioterapia, Fono, etc.</td>
                                        <td class="p-3 text-center">40%</td>
                                        <td class="p-3 text-center">R$ 60,00</td>
                                        <td class="p-3 text-center">R$ 60,00</td>
                                        <td class="p-3 text-center">R$ 60,00</td>
                                    </tr>
                                    <tr class="border-b bg-gray-50"><td class="p-2 font-semibold text-gray-600" colspan="5">Internação</td></tr>
                                    <tr>
                                        <td class="p-3 text-left">Internação</td>
                                        <td class="p-3 text-center">-</td>
                                        <td class="p-3 text-center">R$ 180,00</td>
                                        <td class="p-3 text-center">R$ 220,00</td>
                                        <td class="p-3 text-center">R$ 180,00</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div id="copay-table-parcial" class="hidden">
                        <h3 class="text-lg font-bold text-gray-800 text-center mb-4">Valores para Coparticipação Parcial</h3>
                         <div class="overflow-x-auto">
                            <table class="w-full text-sm text-left text-gray-700 bg-white rounded-lg shadow-md">
                                <thead class="bg-gray-200 text-xs uppercase">
                                    <tr>
                                        <th class="p-3 text-left font-medium">Procedimento</th>
                                        <th class="p-3 text-center font-medium">Percentual</th>
                                        <th class="p-3 text-center font-medium">Bronze / Bronze+</th>
                                        <th class="p-3 text-center font-medium">Prata / Ouro</th>
                                        <th class="p-3 text-center font-medium">S380</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="border-b bg-gray-50"><td class="p-2 font-semibold text-gray-600" colspan="5">Terapias</td></tr>
                                    <tr class="border-b">
                                        <td class="p-3 text-left">Fisioterapia, Fono, Nutrição, Psicoterapia, T. Ocupacional</td>
                                        <td class="p-3 text-center">40%</td>
                                        <td class="p-3 text-center">R$ 60,00</td>
                                        <td class="p-3 text-center">R$ 60,00</td>
                                        <td class="p-3 text-center">R$ 60,00</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bg-gray-800 text-white p-6 rounded-lg text-center shadow-md mt-10">
                <h2 class="text-xl font-bold mb-1">Ficou com dúvidas ou já decidiu?</h2>
                <p class="text-gray-100">Fale com o RH para validar os detalhes ou, se preferir, chame-nos diretamente no WhatsApp!</p>
                <div class="mt-4">
                    <a href="https://wa.me/551120945454?text=Ol%C3%A1%2C%0A%0AQueria%20tirar%20algumas%20d%C3%BAvidas%20sobre%20o%20plano%20de%20sa%C3%BAde."
                       target="_blank"
                       class="inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-green-600 hover:bg-green-700 transition-colors">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path d="M12.04 2.012c-5.524 0-10 4.476-10 10.002 0 1.75.45 3.406 1.255 4.842l-1.25 4.143 4.26-1.233a9.924 9.924 0 0 0 4.735 1.218h.002c5.524 0 10-4.476 10-10.002s-4.476-10-10-10.002zm0 18.232h-.002a8.162 8.162 0 0 1-4.14-1.203l-.3-.176-3.055.882.898-2.982-.192-.312a8.138 8.138 0 0 1-1.254-4.397c0-4.52 3.66-8.184 8.18-8.184 2.22 0 4.28.87 5.78 2.373 1.5 1.504 2.37 3.562 2.37 5.782.002 4.52-3.66 8.182-8.18 8.182zm4.8-6.13c-.26-.132-1.542-.76-1.782-.846-.24-.086-.414-.132-.59.132-.174.262-.672.845-.824 1.01-.152.162-.3.18-.56.06-.26-.12-.48-.21-.73-.33-.5-.24-.96-.54-1.36-.9-.32-.29-.58-.52-.79-.81-.2-.28-.27-.41-.4-.53-.13-.12-.27-.18-.4-.25-.13-.07-.28-.09-.42-.09-.14 0-.37.01-.54.02-.17.01-.43.02-.65.03-.22.01-.58.05-.87.32-.29.27-.99.96-.99 2.34 0 1.38.99 2.72 1.14 2.91.15.19 1.98 3.03 4.8 4.26.68.29 1.22.46 1.64.59.75.22 1.42.19 1.95.11.59-.08 1.54-.63 1.76-1.23.22-.6.22-1.14.15-1.23-.07-.09-.26-.15-.52-.28z"/></svg>
                        Fale conosco no WhatsApp
                    </a>
                </div>
            </div>
        </div>
    </div>

<script>
    // --- ESTRUTURA DE DADOS PARA TODAS AS TABELAS ---
    const allPricingData = {
        // LINHA S
        's_29_completa': {
            plans: ["Amil S380 QC", "Amil S380 QP"],
            data: { "Amil S380 QC": [ { ageRange: [0, 18], price: 273.84 }, { ageRange: [19, 23], price: 320.39 }, { ageRange: [24, 28], price: 390.88 }, { ageRange: [29, 33], price: 469.06 }, { ageRange: [34, 38], price: 492.51 }, { ageRange: [39, 43], price: 541.76 }, { ageRange: [44, 48], price: 677.20 }, { ageRange: [49, 53], price: 744.92 }, { ageRange: [54, 58], price: 931.15 }, { ageRange: [59, 999], price: 1629.51 } ], "Amil S380 QP": [ { ageRange: [0, 18], price: 303.96 }, { ageRange: [19, 23], price: 355.63 }, { ageRange: [24, 28], price: 433.87 }, { ageRange: [29, 33], price: 520.64 }, { ageRange: [34, 38], price: 546.67 }, { ageRange: [39, 43], price: 601.34 }, { ageRange: [44, 48], price: 751.68 }, { ageRange: [49, 53], price: 826.85 }, { ageRange: [54, 58], price: 1033.56 }, { ageRange: [59, 999], price: 1808.73 } ] }
        },
        's_29_parcial': {
            plans: ["Amil S380 QC", "Amil S380 QP"],
            data: { "Amil S380 QC": [ { ageRange: [0, 18], price: 365.11 }, { ageRange: [19, 23], price: 427.18 }, { ageRange: [24, 28], price: 521.16 }, { ageRange: [29, 33], price: 625.39 }, { ageRange: [34, 38], price: 656.66 }, { ageRange: [39, 43], price: 722.33 }, { ageRange: [44, 48], price: 902.91 }, { ageRange: [49, 53], price: 993.20 }, { ageRange: [54, 58], price: 1241.50 }, { ageRange: [59, 999], price: 2172.63 } ], "Amil S380 QP": [ { ageRange: [0, 18], price: 405.27 }, { ageRange: [19, 23], price: 474.17 }, { ageRange: [24, 28], price: 578.49 }, { ageRange: [29, 33], price: 694.19 }, { ageRange: [34, 38], price: 728.90 }, { ageRange: [39, 43], price: 801.79 }, { ageRange: [44, 48], price: 1002.24 }, { ageRange: [49, 53], price: 1102.46 }, { ageRange: [54, 58], price: 1378.08 }, { ageRange: [59, 999], price: 2411.64 } ] }
        },
        's_30_completa': {
            plans: ["Amil S380 QC", "Amil S380 QP"],
            data: { "Amil S380 QC": [ { ageRange: [0, 18], price: 265.81 }, { ageRange: [19, 23], price: 311.00 }, { ageRange: [24, 28], price: 379.42 }, { ageRange: [29, 33], price: 455.30 }, { ageRange: [34, 38], price: 478.07 }, { ageRange: [39, 43], price: 525.88 }, { ageRange: [44, 48], price: 657.35 }, { ageRange: [49, 53], price: 723.09 }, { ageRange: [54, 58], price: 903.86 }, { ageRange: [59, 999], price: 1581.76 } ], "Amil S380 QP": [ { ageRange: [0, 18], price: 295.05 }, { ageRange: [19, 23], price: 345.21 }, { ageRange: [24, 28], price: 421.16 }, { ageRange: [29, 33], price: 505.39 }, { ageRange: [34, 38], price: 530.66 }, { ageRange: [39, 43], price: 583.73 }, { ageRange: [44, 48], price: 729.66 }, { ageRange: [49, 53], price: 802.63 }, { ageRange: [54, 58], price: 1003.29 }, { ageRange: [59, 999], price: 1755.76 } ] }
        },
        's_30_parcial': {
            plans: ["Amil S380 QC", "Amil S380 QP"],
            data: { "Amil S380 QC": [ { ageRange: [0, 18], price: 354.41 }, { ageRange: [19, 23], price: 414.66 }, { ageRange: [24, 28], price: 505.89 }, { ageRange: [29, 33], price: 607.07 }, { ageRange: [34, 38], price: 637.42 }, { ageRange: [39, 43], price: 701.16 }, { ageRange: [44, 48], price: 876.45 }, { ageRange: [49, 53], price: 964.10 }, { ageRange: [54, 58], price: 1205.13 }, { ageRange: [59, 999], price: 2108.98 } ], "Amil S380 QP": [ { ageRange: [0, 18], price: 393.39 }, { ageRange: [19, 23], price: 460.27 }, { ageRange: [24, 28], price: 561.53 }, { ageRange: [29, 33], price: 673.84 }, { ageRange: [34, 38], price: 707.53 }, { ageRange: [39, 43], price: 778.28 }, { ageRange: [44, 48], price: 972.85 }, { ageRange: [49, 53], price: 1070.14 }, { ageRange: [54, 58], price: 1337.68 }, { ageRange: [59, 999], price: 2340.94 } ] }
        },
        // NOVA LINHA AMIL
        'nova_29_completa': {
            plans: ["Amil Bronze SP QC", "Amil Bronze SP Mais QC", "Amil Prata QC", "Amil Prata QP", "Amil Ouro QC", "Amil Ouro QP"],
            data: { "Amil Bronze SP QC": [ { ageRange: [0, 18], price: 111.10 }, { ageRange: [19, 23], price: 150.87 }, { ageRange: [24, 28], price: 177.11 }, { ageRange: [29, 33], price: 177.11 }, { ageRange: [34, 38], price: 177.11 }, { ageRange: [39, 43], price: 197.83 }, { ageRange: [44, 48], price: 273.20 }, { ageRange: [49, 53], price: 326.20 }, { ageRange: [54, 58], price: 469.08 }, { ageRange: [59, 999], price: 665.16 } ], "Amil Bronze SP Mais QC": [ { ageRange: [0, 18], price: 139.03 }, { ageRange: [19, 23], price: 188.80 }, { ageRange: [24, 28], price: 221.63 }, { ageRange: [29, 33], price: 221.63 }, { ageRange: [34, 38], price: 221.63 }, { ageRange: [39, 43], price: 247.56 }, { ageRange: [44, 48], price: 341.88 }, { ageRange: [49, 53], price: 408.20 }, { ageRange: [54, 58], price: 586.99 }, { ageRange: [59, 999], price: 832.35 } ], "Amil Prata QC": [ { ageRange: [0, 18], price: 249.63 }, { ageRange: [19, 23], price: 292.07 }, { ageRange: [24, 28], price: 356.33 }, { ageRange: [29, 33], price: 427.60 }, { ageRange: [34, 38], price: 448.98 }, { ageRange: [39, 43], price: 493.88 }, { ageRange: [44, 48], price: 617.35 }, { ageRange: [49, 53], price: 679.09 }, { ageRange: [54, 58], price: 848.86 }, { ageRange: [59, 999], price: 1485.51 } ], "Amil Prata QP": [ { ageRange: [0, 18], price: 277.09 }, { ageRange: [19, 23], price: 324.20 }, { ageRange: [24, 28], price: 395.52 }, { ageRange: [29, 33], price: 474.62 }, { ageRange: [34, 38], price: 498.35 }, { ageRange: [39, 43], price: 548.19 }, { ageRange: [44, 48], price: 685.24 }, { ageRange: [49, 53], price: 753.76 }, { ageRange: [54, 58], price: 942.20 }, { ageRange: [59, 999], price: 1648.85 } ], "Amil Ouro QC": [ { ageRange: [0, 18], price: 284.07 }, { ageRange: [19, 23], price: 332.36 }, { ageRange: [24, 28], price: 405.48 }, { ageRange: [29, 33], price: 486.58 }, { ageRange: [34, 38], price: 510.91 }, { ageRange: [39, 43], price: 562.00 }, { ageRange: [44, 48], price: 702.50 }, { ageRange: [49, 53], price: 772.75 }, { ageRange: [54, 58], price: 965.94 }, { ageRange: [59, 999], price: 1690.40 } ], "Amil Ouro QP": [ { ageRange: [0, 18], price: 315.32 }, { ageRange: [19, 23], price: 368.92 }, { ageRange: [24, 28], price: 450.08 }, { ageRange: [29, 33], price: 540.10 }, { ageRange: [34, 38], price: 567.11 }, { ageRange: [39, 43], price: 623.82 }, { ageRange: [44, 48], price: 779.78 }, { ageRange: [49, 53], price: 857.76 }, { ageRange: [54, 58], price: 1072.20 }, { ageRange: [59, 999], price: 1876.35 } ] }
        },
        'nova_29_parcial': {
            plans: ["Amil Bronze SP QC", "Amil Bronze SP Mais QC", "Amil Prata QC", "Amil Prata QP", "Amil Ouro QC", "Amil Ouro QP"],
            data: { "Amil Bronze SP QC": [ { ageRange: [0, 18], price: 148.13 }, { ageRange: [19, 23], price: 201.16 }, { ageRange: [24, 28], price: 236.14 }, { ageRange: [29, 33], price: 236.14 }, { ageRange: [34, 38], price: 236.14 }, { ageRange: [39, 43], price: 263.77 }, { ageRange: [44, 48], price: 364.27 }, { ageRange: [49, 53], price: 434.94 }, { ageRange: [54, 58], price: 625.44 }, { ageRange: [59, 999], price: 886.87 } ], "Amil Bronze SP Mais QC": [ { ageRange: [0, 18], price: 185.36 }, { ageRange: [19, 23], price: 251.72 }, { ageRange: [24, 28], price: 295.49 }, { ageRange: [29, 33], price: 295.49 }, { ageRange: [34, 38], price: 295.49 }, { ageRange: [39, 43], price: 330.06 }, { ageRange: [44, 48], price: 455.81 }, { ageRange: [49, 53], price: 544.24 }, { ageRange: [54, 58], price: 782.62 }, { ageRange: [59, 999], price: 1109.76 } ], "Amil Prata QC": [ { ageRange: [0, 18], price: 332.83 }, { ageRange: [19, 23], price: 389.41 }, { ageRange: [24, 28], price: 475.08 }, { ageRange: [29, 33], price: 570.10 }, { ageRange: [34, 38], price: 598.61 }, { ageRange: [39, 43], price: 658.47 }, { ageRange: [44, 48], price: 823.09 }, { ageRange: [49, 53], price: 905.40 }, { ageRange: [54, 58], price: 1131.75 }, { ageRange: [59, 999], price: 1980.56 } ], "Amil Prata QP": [ { ageRange: [0, 18], price: 369.45 }, { ageRange: [19, 23], price: 432.26 }, { ageRange: [24, 28], price: 527.36 }, { ageRange: [29, 33], price: 632.83 }, { ageRange: [34, 38], price: 664.47 }, { ageRange: [39, 43], price: 730.92 }, { ageRange: [44, 48], price: 913.65 }, { ageRange: [49, 53], price: 1005.02 }, { ageRange: [54, 58], price: 1256.28 }, { ageRange: [59, 999], price: 2198.49 } ], "Amil Ouro QC": [ { ageRange: [0, 18], price: 378.75 }, { ageRange: [19, 23], price: 443.14 }, { ageRange: [24, 28], price: 540.63 }, { ageRange: [29, 33], price: 648.76 }, { ageRange: [34, 38], price: 681.20 }, { ageRange: [39, 43], price: 749.32 }, { ageRange: [44, 48], price: 936.65 }, { ageRange: [49, 53], price: 1030.32 }, { ageRange: [54, 58], price: 1287.90 }, { ageRange: [59, 999], price: 2253.83 } ], "Amil Ouro QP": [ { ageRange: [0, 18], price: 420.42 }, { ageRange: [19, 23], price: 491.89 }, { ageRange: [24, 28], price: 600.11 }, { ageRange: [29, 33], price: 720.13 }, { ageRange: [34, 38], price: 756.14 }, { ageRange: [39, 43], price: 831.75 }, { ageRange: [44, 48], price: 1039.69 }, { ageRange: [49, 53], price: 1143.66 }, { ageRange: [54, 58], price: 1429.58 }, { ageRange: [59, 999], price: 2501.77 } ] }
        },
        'nova_30_completa': {
            plans: ["Amil Bronze SP QC", "Amil Bronze SP Mais QC", "Amil Prata QC", "Amil Prata QP", "Amil Ouro QC", "Amil Ouro QP"],
            data: { "Amil Bronze SP QC": [ { ageRange: [0, 18], price: 105.55 }, { ageRange: [19, 23], price: 143.34 }, { ageRange: [24, 28], price: 168.27 }, { ageRange: [29, 33], price: 168.27 }, { ageRange: [34, 38], price: 168.27 }, { ageRange: [39, 43], price: 187.96 }, { ageRange: [44, 48], price: 259.57 }, { ageRange: [49, 53], price: 309.93 }, { ageRange: [54, 58], price: 445.68 }, { ageRange: [59, 999], price: 631.97 } ], "Amil Bronze SP Mais QC": [ { ageRange: [0, 18], price: 132.08 }, { ageRange: [19, 23], price: 179.36 }, { ageRange: [24, 28], price: 210.55 }, { ageRange: [29, 33], price: 210.55 }, { ageRange: [34, 38], price: 210.55 }, { ageRange: [39, 43], price: 235.18 }, { ageRange: [44, 48], price: 324.78 }, { ageRange: [49, 53], price: 387.79 }, { ageRange: [54, 58], price: 557.64 }, { ageRange: [59, 999], price: 790.73 } ], "Amil Prata QC": [ { ageRange: [0, 18], price: 242.31 }, { ageRange: [19, 23], price: 283.50 }, { ageRange: [24, 28], price: 345.87 }, { ageRange: [29, 33], price: 415.04 }, { ageRange: [34, 38], price: 435.79 }, { ageRange: [39, 43], price: 479.37 }, { ageRange: [44, 48], price: 599.21 }, { ageRange: [49, 53], price: 659.13 }, { ageRange: [54, 58], price: 823.91 }, { ageRange: [59, 999], price: 1441.84 } ], "Amil Prata QP": [ { ageRange: [0, 18], price: 268.96 }, { ageRange: [19, 23], price: 314.68 }, { ageRange: [24, 28], price: 383.91 }, { ageRange: [29, 33], price: 460.69 }, { ageRange: [34, 38], price: 483.72 }, { ageRange: [39, 43], price: 532.09 }, { ageRange: [44, 48], price: 665.11 }, { ageRange: [49, 53], price: 731.62 }, { ageRange: [54, 58], price: 914.53 }, { ageRange: [59, 999], price: 1600.43 } ], "Amil Ouro QC": [ { ageRange: [0, 18], price: 275.74 }, { ageRange: [19, 23], price: 322.62 }, { ageRange: [24, 28], price: 393.60 }, { ageRange: [29, 33], price: 472.32 }, { ageRange: [34, 38], price: 495.94 }, { ageRange: [39, 43], price: 545.53 }, { ageRange: [44, 48], price: 681.91 }, { ageRange: [49, 53], price: 750.10 }, { ageRange: [54, 58], price: 937.63 }, { ageRange: [59, 999], price: 1640.85 } ], "Amil Ouro QP": [ { ageRange: [0, 18], price: 306.08 }, { ageRange: [19, 23], price: 358.11 }, { ageRange: [24, 28], price: 436.89 }, { ageRange: [29, 33], price: 524.27 }, { ageRange: [34, 38], price: 550.48 }, { ageRange: [39, 43], price: 605.53 }, { ageRange: [44, 48], price: 756.91 }, { ageRange: [49, 53], price: 832.60 }, { ageRange: [54, 58], price: 1040.75 }, { ageRange: [59, 999], price: 1821.31 } ] }
        },
        'nova_30_parcial': {
            plans: ["Amil Bronze SP QC", "Amil Bronze SP Mais QC", "Amil Prata QC", "Amil Prata QP", "Amil Ouro QC", "Amil Ouro QP"],
            data: { "Amil Bronze SP QC": [ { ageRange: [0, 18], price: 140.72 }, { ageRange: [19, 23], price: 191.10 }, { ageRange: [24, 28], price: 224.33 }, { ageRange: [29, 33], price: 224.33 }, { ageRange: [34, 38], price: 224.33 }, { ageRange: [39, 43], price: 250.58 }, { ageRange: [44, 48], price: 346.05 }, { ageRange: [49, 53], price: 413.18 }, { ageRange: [54, 58], price: 594.15 }, { ageRange: [59, 999], price: 842.50 } ], "Amil Bronze SP Mais QC": [ { ageRange: [0, 18], price: 176.09 }, { ageRange: [19, 23], price: 239.13 }, { ageRange: [24, 28], price: 280.71 }, { ageRange: [29, 33], price: 280.71 }, { ageRange: [34, 38], price: 280.71 }, { ageRange: [39, 43], price: 313.55 }, { ageRange: [44, 48], price: 433.01 }, { ageRange: [49, 53], price: 517.01 }, { ageRange: [54, 58], price: 743.46 }, { ageRange: [59, 999], price: 1054.23 } ], "Amil Prata QC": [ { ageRange: [0, 18], price: 323.07 }, { ageRange: [19, 23], price: 377.99 }, { ageRange: [24, 28], price: 461.15 }, { ageRange: [29, 33], price: 553.38 }, { ageRange: [34, 38], price: 581.05 }, { ageRange: [39, 43], price: 639.16 }, { ageRange: [44, 48], price: 798.95 }, { ageRange: [49, 53], price: 878.85 }, { ageRange: [54, 58], price: 1098.56 }, { ageRange: [59, 999], price: 1922.48 } ], "Amil Prata QP": [ { ageRange: [0, 18], price: 358.61 }, { ageRange: [19, 23], price: 419.57 }, { ageRange: [24, 28], price: 511.88 }, { ageRange: [29, 33], price: 614.26 }, { ageRange: [34, 38], price: 644.97 }, { ageRange: [39, 43], price: 709.47 }, { ageRange: [44, 48], price: 886.84 }, { ageRange: [49, 53], price: 975.52 }, { ageRange: [54, 58], price: 1219.40 }, { ageRange: [59, 999], price: 2133.95 } ], "Amil Ouro QC": [ { ageRange: [0, 18], price: 367.64 }, { ageRange: [19, 23], price: 430.14 }, { ageRange: [24, 28], price: 524.77 }, { ageRange: [29, 33], price: 629.72 }, { ageRange: [34, 38], price: 661.21 }, { ageRange: [39, 43], price: 727.33 }, { ageRange: [44, 48], price: 909.16 }, { ageRange: [49, 53], price: 1000.08 }, { ageRange: [54, 58], price: 1250.10 }, { ageRange: [59, 999], price: 2187.68 } ], "Amil Ouro QP": [ { ageRange: [0, 18], price: 408.09 }, { ageRange: [19, 23], price: 477.47 }, { ageRange: [24, 28], price: 582.51 }, { ageRange: [29, 33], price: 699.01 }, { ageRange: [34, 38], price: 733.96 }, { ageRange: [39, 43], price: 807.36 }, { ageRange: [44, 48], price: 1009.20 }, { ageRange: [49, 53], price: 1110.12 }, { ageRange: [54, 58], price: 1387.65 }, { ageRange: [59, 999], price: 2428.39 } ] }
        }
    };

    // --- VARIÁVEIS DE ESTADO ---
    let selectedTier = null;
    let selectedLine = null;
    let selectedCopay = null;
    let activePricingData = {};
    let activePlans = [];

    // --- ELEMENTOS DO DOM ---
    const mainSimulator = document.getElementById('main-simulator');
    const tierSelectionDiv = document.getElementById('tier-selection');
    const lineSelectionDiv = document.getElementById('line-selection');
    const copaySelectionDiv = document.getElementById('copay-selection');
    const tierButtons = document.querySelectorAll('.tier-button');
    const lineButtons = document.querySelectorAll('.line-button');
    const copayButtons = document.querySelectorAll('.copay-button');
    const holderAgeInput = document.getElementById('holder-age');
    const addDependentBtn = document.getElementById('add-dependent-btn');
    const dependentsList = document.getElementById('dependents-list');
    const calculateBtn = document.getElementById('calculate-btn');
    const simulationResultsDiv = document.getElementById('simulation-results');
    const viewNetworkBtn = document.getElementById('view-network-btn');
    const copayTableCompleta = document.getElementById('copay-table-completa');
    const copayTableParcial = document.getElementById('copay-table-parcial');
    
    let dependentCount = 0;

    // --- EVENTOS ---
    tierButtons.forEach(button => {
        button.addEventListener('click', (e) => {
            tierButtons.forEach(btn => btn.classList.remove('selected'));
            e.currentTarget.classList.add('selected');
            selectedTier = e.currentTarget.dataset.tier;
            lineSelectionDiv.classList.remove('hidden');
            copaySelectionDiv.classList.add('hidden');
            mainSimulator.classList.add('hidden');
            simulationResultsDiv.classList.add('hidden');
        });
    });

    lineButtons.forEach(button => {
        button.addEventListener('click', (e) => {
            lineButtons.forEach(btn => btn.classList.remove('selected'));
            e.currentTarget.classList.add('selected');
            selectedLine = e.currentTarget.dataset.line;
            copaySelectionDiv.classList.remove('hidden');
            mainSimulator.classList.add('hidden');
            simulationResultsDiv.classList.add('hidden');
        });
    });

    copayButtons.forEach(button => {
        button.addEventListener('click', (e) => {
            copayButtons.forEach(btn => btn.classList.remove('selected'));
            e.currentTarget.classList.add('selected');
            selectedCopay = e.currentTarget.dataset.copay;

            const pricingKey = `${selectedLine}_${selectedTier}_${selectedCopay}`;
            activePricingData = allPricingData[pricingKey].data;
            activePlans = allPricingData[pricingKey].plans;
            
            mainSimulator.classList.remove('hidden');
            simulationResultsDiv.classList.add('hidden');

            // --- LÓGICA PARA EXIBIR A TABELA DE COPARTICIPAÇÃO CORRETA ---
            if (selectedCopay === 'completa') {
                copayTableParcial.classList.add('hidden');
                copayTableCompleta.classList.remove('hidden');
            } else if (selectedCopay === 'parcial') {
                copayTableCompleta.classList.add('hidden');
                copayTableParcial.classList.remove('hidden');
            }
        });
    });

    addDependentBtn.addEventListener('click', addDependentInput);
    calculateBtn.addEventListener('click', calculateAndDisplayCosts);
    viewNetworkBtn.addEventListener('click', () => {
        const networkUrl = 'https://www.amil.com.br/portal/web/servicos/saude/rede-credenciada/amil/busca-avancada';
        window.open(networkUrl, '_blank');
    });

    // --- FUNÇÕES ---
    function addDependentInput() {
        dependentCount++;
        const div = document.createElement('div');
        div.className = 'flex items-center gap-2 mt-2';
        div.innerHTML = `<input type="number" placeholder="Idade do dependente ${dependentCount}" class="w-full p-2 border border-gray-300 rounded-md shadow-sm"><button class="remove-dependent-btn text-red-500 hover:text-red-700 font-bold px-2">&times;</button>`;
        dependentsList.appendChild(div);
        div.querySelector('.remove-dependent-btn').addEventListener('click', () => div.remove());
    }

    function getPriceForAge(age, planName, data) {
        if (age === null || age < 0 || !data[planName]) return 0;
        const tier = data[planName].find(p => age >= p.ageRange[0] && age <= p.ageRange[1]);
        return tier ? tier.price : 0;
    }

    function formatCurrency(value) {
        return value.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
    }

    function calculateAndDisplayCosts() {
        if (!selectedTier || !selectedLine || !selectedCopay) {
            alert('Por favor, complete todos os passos de seleção antes de simular.');
            return;
        }
        const holderAge = parseInt(holderAgeInput.value, 10) || null;
        if (!holderAge) {
            alert('Por favor, insira a idade do titular.');
            return;
        }
        const dependentAgeInputs = dependentsList.querySelectorAll('input');
        const dependentAges = Array.from(dependentAgeInputs).map(input => parseInt(input.value, 10) || 0).filter(age => age > 0);
        const totals = activePlans.reduce((acc, plan) => ({ ...acc, [plan]: 0 }), {});
        let tableRows = '';
        const allAges = [ {type: 'Titular', age: holderAge}, ...dependentAges.map((age, i) => ({type: `Dependente ${i+1}`, age}))];
        
        allAges.forEach(person => {
            let personLabel = `${person.type} (${person.age} anos)`;
            tableRows += `<tr class="border-b"><td class="p-2 font-semibold text-gray-800">${personLabel}</td>`;
            activePlans.forEach(planName => {
                const finalPrice = getPriceForAge(person.age, planName, activePricingData);
                totals[planName] += finalPrice;
                tableRows += `<td class="p-2 text-center text-sm">${formatCurrency(finalPrice)}</td>`;
            });
            tableRows += `</tr>`;
        });
        
        const resultHTML = `
            <h3 class="text-xl font-bold text-gray-800 text-center mb-4">Custo Mensal Total do Plano</h3>
            <div class="overflow-x-auto table-fade-in">
                <table class="w-full text-sm text-left text-gray-700 bg-white rounded-lg shadow">
                    <thead class="bg-gray-200 text-xs uppercase">
                        <tr>
                            <th class="p-2">Beneficiário</th>
                            ${activePlans.map(p => `<th class="p-2 text-center font-medium">${p}</th>`).join('')}
                        </tr>
                    </thead>
                    <tbody>
                        ${tableRows}
                        <tr class="bg-gray-800 text-white font-bold">
                            <td class="p-3">CUSTO TOTAL MENSAL</td>
                            ${activePlans.map(p => `<td class="p-3 text-center text-base">${formatCurrency(totals[p])}</td>`).join('')}
                        </tr>
                    </tbody>
                </table>
            </div>`;
        
        simulationResultsDiv.innerHTML = resultHTML;
        simulationResultsDiv.classList.remove('hidden');
    }
</script>
</body>

</html>

